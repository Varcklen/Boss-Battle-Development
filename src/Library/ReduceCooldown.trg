{
  "Id": 50332087,
  "Comment": "",
  "IsScript": true,
  "RunOnMapInit": false,
  "Script": "library ReduceCooldown\r\n\r\n\tglobals\r\n\t\tprivate constant real COOLDOWN_MIN = 0.1\t\r\n\tendglobals\r\n\r\n\tfunction UnitReduceAbilityCooldown takes unit target, integer abilityAffected, real time returns nothing\r\n\t\tlocal real currentCooldown\r\n\t\r\n\t\tif IsUnitInGroup( target, udg_heroinfo) == false then\r\n            call BJDebugMsg(\"Error! ReduceCooldown - UnitReduceAbilityCooldown: You are trying to reduce the cooldown of a '\" + GetUnitName(target) + \"' unit that is not a hero! \")\r\n            return\r\n        endif\r\n        \r\n        if GetUnitAbilityLevel( target, abilityAffected) == 0 then\r\n        \treturn\r\n        endif\r\n        \r\n        set currentCooldown = BlzGetUnitAbilityCooldownRemaining( target, abilityAffected)\r\n        \r\n        if currentCooldown <= COOLDOWN_MIN then \r\n        \treturn\r\n        endif\r\n        if time <= 0 then \r\n        \treturn\r\n        endif\r\n        \r\n        if currentCooldown > time then\r\n            call BlzStartUnitAbilityCooldown( target, abilityAffected, currentCooldown - time )\r\n        else\r\n        \tcall BlzEndUnitAbilityCooldown( target, abilityAffected )\r\n        endif\r\n\t\r\n\t\tset target = null\r\n\tendfunction\r\n\t\r\n\tfunction UnitReduceAbilityCooldownPercent takes unit target, integer abilityAffected, real percent returns nothing\r\n\t\tcall UnitReduceAbilityCooldown(target, abilityAffected, BlzGetUnitAbilityCooldown( target, abilityAffected, GetUnitAbilityLevel( target, abilityAffected ) - 1 ) * percent )\r\n\tendfunction\r\n\r\n    function UnitReduceCooldown takes unit target, real time returns nothing\r\n        local integer heroAbility\r\n        local integer i\r\n        local integer index = GetUnitUserData(target)\r\n        \r\n        if IsUnitInGroup(target, udg_heroinfo) == false then\r\n            call BJDebugMsg(\"Error! ReduceCooldown - UnitReduceCooldown: You are trying to reduce the cooldown of a \\\"\" + GetUnitName(target) + \"\\\" unit that is not a hero! Please report this error to the map author.\")\r\n            return\r\n        endif\r\n        \r\n        set i = 1\r\n        loop\r\n            exitwhen i > 4\r\n            set heroAbility = Database_Hero_Abilities[i][udg_HeroNum[index]]\r\n            call UnitReduceAbilityCooldown(target, heroAbility, time)\r\n            set i = i + 1\r\n        endloop\r\n        \r\n        set target = null\r\n        \r\n        /*if GetUnitAbilityLevel( u, Database_Hero_Abilities[1][udg_HeroNum[i]]) > 0 then\r\n            set a[1] = Database_Hero_Abilities[1][udg_HeroNum[i]]\r\n        endif\r\n        if GetUnitAbilityLevel( u, Database_Hero_Abilities[2][udg_HeroNum[i]]) > 0 then\r\n            set a[2] = Database_Hero_Abilities[2][udg_HeroNum[i]]\r\n        endif\r\n        if GetUnitAbilityLevel( u, Database_Hero_Abilities[3][udg_HeroNum[i]]) > 0 then\r\n            set a[3] = Database_Hero_Abilities[3][udg_HeroNum[i]]\r\n        endif\r\n        if GetUnitAbilityLevel( u, Database_Hero_Abilities[4][udg_HeroNum[i]]) > 0 then\r\n            set a[4] = Database_Hero_Abilities[4][udg_HeroNum[i]]\r\n        endif*/\r\n\r\n        /*set i = 1\r\n        loop\r\n            exitwhen i > 4\r\n            if heroAbility[i] != 0 then\r\n            \tcall UnitReduceAbilityCooldown(target, heroAbility[i], time)\r\n                if BlzGetUnitAbilityCooldownRemaining(target, heroAbility[i]) > time then\r\n                    call BlzStartUnitAbilityCooldown( target, heroAbility[i], RMaxBJ( 0.1,BlzGetUnitAbilityCooldownRemaining(target, heroAbility[i]) - time) )\r\n                endif\r\n            endif\r\n            set i = i + 1\r\n        endloop*/\r\n    endfunction\r\n\r\n    function UnitReduceCooldownPercent takes unit target, real percent returns nothing\r\n    \tlocal integer heroAbility\r\n        local integer i\r\n        local integer index = GetUnitUserData(target)\r\n        \r\n        if IsUnitInGroup(target, udg_heroinfo) == false then\r\n            call BJDebugMsg(\"Error! ReduceCooldown - UnitReduceCooldown: You are trying to reduce the cooldown of a \\\"\" + GetUnitName(target) + \"\\\" unit that is not a hero! Please report this error to the map author.\")\r\n            return\r\n        endif\r\n        \r\n        set i = 1\r\n        loop\r\n            exitwhen i > 4\r\n            set heroAbility = Database_Hero_Abilities[i][udg_HeroNum[index]]\r\n            call UnitReduceAbilityCooldownPercent(target, heroAbility, percent)\r\n            set i = i + 1\r\n        endloop\r\n    \r\n    \tset target = null\r\n    \r\n        /*local integer array a\r\n        local integer cyclA\r\n        local integer i = GetUnitUserData(u)\r\n\r\n        if not(IsUnitInGroup(u, udg_heroinfo)) then\r\n            call BJDebugMsg(\"You are trying to reduce the cooldown of a \\\"\" + GetUnitName(u) + \"\\\" unit that is not a hero! Please report this error to the map author.\")\r\n            return\r\n        endif\r\n\r\n        if percent < 0 then\r\n            set percent = 0\r\n        endif\r\n\r\n        set cyclA = 1\r\n        loop\r\n            exitwhen cyclA > 4\r\n            set a[cyclA] = 0\r\n            set cyclA = cyclA + 1\r\n        endloop\r\n        \r\n        if GetUnitAbilityLevel( u, Database_Hero_Abilities[1][udg_HeroNum[i]]) > 0 then\r\n            set a[1] = Database_Hero_Abilities[1][udg_HeroNum[i]]\r\n        endif\r\n        if GetUnitAbilityLevel( u, Database_Hero_Abilities[2][udg_HeroNum[i]]) > 0 then\r\n            set a[2] = Database_Hero_Abilities[2][udg_HeroNum[i]]\r\n        endif\r\n        if GetUnitAbilityLevel( u, Database_Hero_Abilities[3][udg_HeroNum[i]]) > 0 then\r\n            set a[3] = Database_Hero_Abilities[3][udg_HeroNum[i]]\r\n        endif\r\n        if GetUnitAbilityLevel( u, Database_Hero_Abilities[4][udg_HeroNum[i]]) > 0 then\r\n            set a[4] = Database_Hero_Abilities[4][udg_HeroNum[i]]\r\n        endif\r\n\r\n        set cyclA = 1\r\n        loop\r\n            exitwhen cyclA > 4\r\n            if a[cyclA] != 0 then\r\n                call BlzStartUnitAbilityCooldown( u, a[cyclA], RMaxBJ( 0.1,BlzGetUnitAbilityCooldownRemaining(u, a[cyclA]) * percent) )\r\n            endif\r\n            set cyclA = cyclA + 1\r\n        endloop\r\n        \r\n        set cyclA = 1\r\n        loop\r\n            exitwhen cyclA > 4\r\n            set a[cyclA] = 0\r\n            set cyclA = cyclA + 1\r\n        endloop\r\n\r\n        set u = null*/\r\n    endfunction\r\n\r\nendlibrary",
  "Events": [],
  "LocalVariables": [],
  "Conditions": [],
  "Actions": []
}